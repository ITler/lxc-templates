#! /bin/bash

# Dieses Template basiert auf dem Default Template für Ubuntu 
# und führt erweiterte Konfigurationen am erstellten Container durch

if [ ! -x lxc-ubuntu ]; then
	echo Failed because Ubuntu template not readable
	exit 1
fi

# code

addAdditionalPackages() {
	chroot $rootfs apt-get update >/dev/null
	chroot $rootfs apt-get install --force-yes -y wget git htop  >/dev/null
	
	return 0
}

addAptProxy() {
	echo "Acquire::http::Proxy \"http://freerunner.fritz.box:3142\";" > $rootfs/etc/apt/apt.conf.d/01proxy
	
	return 0
}


source lxc-ubuntu

if [ $? -ne 0 ]; then
    echo Extensions not processed because basic ubuntu template failed
    exit 1
fi

addAptProxy
addAdditionalPackages

if [ $? -ne 0 ]; then
    echo Extensions could not be set
    exit 1
fi

exit 0
